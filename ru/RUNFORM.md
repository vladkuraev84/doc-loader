## Загрузчик Виджет-формы (Widget Form Loader) (src/index.ts)

> Файл является частью веб-приложения и отвечает за загрузку и инициализацию виджета-формы.

### Импорт Модулей

Импортированные модули:

- **StyleInjector**: Класс, отвечающий за подключение стилей в приложение.
- **FormWorker**: Класс, предназначенный для работы с HTML-формами.
- **ParamsWorker**: Класс, обрабатывающий параметры форм.
- **Informator**: Класс, предоставляющий информацию для приложения.
- **Bridge**: Класс, обеспечивающий связь между разными частями приложения.
- **BundleInjector**: Класс, отвечающий за инжекцию бандлов (пакетов).
- **ModulesLoader**: Класс, загружающий модули.
- **DomLoader**: Класс, загружающий файлы DOM.
- **SchemesController**: Класс, управляющий схемами.

Также импортируются различные типы данных из файлов **./types/common.types**, **./classes/informator/types**, и **./types/scheme.types**. Эти типы данных используются для аннотации переменных и параметров функций.

### Класс Загрузчика Виджет-Формы (WDFL)

Данный класс **WDFL** представляет собой загрузчик виджет-формы и содержит статический метод **run()**, который выполняет последовательность действий для загрузки и инициализации виджета-формы:

1. **Получение HTML-форм**: Метод **`FormWorker.getForms()`** получает все HTML-формы на странице и сохраняет их в переменной **`forms`**.
2. **Извлечение Параметров Форм**: Для каждой формы извлекаются параметры с использованием метода **`ParamsWorker.get(form)`**. Полученные параметры сохраняются в массив **`allFormParams`**.
3. **Проверка Параметров**: Параметры проверяются на валидность с помощью метода **`ParamsWorker.validate(params)`**. Если параметры не проходят проверку, возникающие ошибки выводятся в консоль.
4. **Инициализация Информатора**: Создается экземпляр класса **`Informator`**, который инициализируется с массивом параметров **`allFormParams`**.
5. **Загрузка Файлов с Информацией**: Метод **`informator.download()`** загружает необходимые файлы и информацию. Результат загрузки сохраняется в массив **`groupedFiles`**.
6. **Отправка Группированных Файлов**: Группированные файлы отправляются с помощью **`Bridge.send(groupedFiles)`** для дальнейшей обработки.
7. **Инициализация Контейнера для Файлов DOM**: Вызывается метод **`DomLoader.initFilesContainer()`** для инициализации контейнера, предназначенного для загрузки файлов **DOM**.
8. **Инициализация Схем и Модулей**: Создаются экземпляры классов **`SchemesController`** и **`ModulesLoader`** для управления схемами и загрузкой модулей, соответственно. Схемы передаются в **`SchemesController`**.
9. **Инжекция Бандлов и Стилей**: Создаются экземпляры классов **`BundleInjector`** и **`StyleInjector`**, которые инициализируются с параметрами форм.

### Запуск Загрузчика Виджет-Формы

Последняя строка кода **`WDFL.run().catch(e => console.error(e))`** вызывает метод **`run()`** класса **`WDFL`**, что начинает процесс загрузки и инициализации виджета-формы. Любые ошибки, возникающие во время этого процесса, будут выведены в консоль с помощью **`console.error(e)`**.

Этот файл представляет собой центральную часть приложения для загрузки виджета-формы и включает в себя обработку форм, загрузку данных и модулей, а также подключение стилей и бандлов.


------------------------------------------ 
- FormWorker: Класс, отвечающий за операции, связанные с формой виджета.
- ParamsWorker: Класс, управляющий операциями по обработке и валидации параметров.
- Informator: Класс, предоставляющий информацию, необходимую для внедрения модулей.
- Bridge: Класс для общения между разными частями приложения.
- BundleInjector: Класс, отвечающий за внедрение пакетов (bundles).
- ModulesLoader: Класс для загрузки модулей.
- FormParams: Тип, представляющий параметры виджета-формы.
- StartedInfo: Тип, представляющий информацию, необходимую для начала.
- Store: Класс, ответственный за хранение и управление данными.
- DomLoader: Класс для загрузки DOM-файлов.
- StyleInjector: Класс для внедрения стилей.
- Класс Загрузчика Виджет-формы (WDFL)
- Класс WDFL содержит один статический метод run, который служит входной точкой для запуска загрузчика виджета-формы. Этот метод следует последовательности шагов для загрузки и инициализации виджета-формы:

Удаление дублированных тегов: Метод **FormWorker.deleteDuplicates()** вызывается для удаления дублированных HTML-тегов. Это обеспечивает чистую и последовательную структуру виджета-формы.

Получение элемента формы: Метод **FormWorker.getForm()** получает HTML-элемент, представляющий виджет-форму. Эта форма будет использоваться для извлечения параметров.

Извлечение параметров формы: Метод **ParamsWorker.get(form)** используется для извлечения параметров из HTML-элемента формы. Извлеченные параметры имеют тип **FormParams**.

Проверка параметров: Метод **ParamsWorker.validate(params)** вызывается для проверки извлеченных параметров. Это включает в себя проверку на наличие обязательных полей или определенных ограничений.

Получение информации о начале: Метод **Informator.getStartedInfo(params)** вызывается для получения информации, необходимой для внедрения модулей. Возвращенный объект содержит схему и локали, необходимые для инициализации.

Отправка данных через **Bridge**: Метод **Bridge.send(scheme, locales)** используется для связи данных с приложением виджета (Player) для дальнейшей обработки.

Сохранение схемы: Полученная схема сохраняется в свойстве **Store.scheme**. Эта схема будет использоваться во время инициализации модулей.

Инициализация контейнера файлов: Метод **DomLoader.initFilesContainer()** вызывается для инициализации контейнера для загрузки файлов DOM.

Загрузка модулей: Метод **ModulesLoader.load()** используется для загрузки необходимых модулей для виджета. Этот шаг включает динамическую загрузку скриптов.

Внедрение пакетов: Метод **BundleInjector.inject(params)** вызывается для внедрения пакета (bundle) в виджет. Это включает в себя внедрение дополнительного JavaScript-кода.

Внедрение стилей: Метод **StyleInjector.inject(params)** используется для внедрения стилей в виджет-форму.

### Запуск Загрузчика Виджет-формы

Статический метод **run()** класса **WDFL** вызывается с помощью **WDFL.run().catch(e => console.error(e))**. Это инициирует весь процесс загрузки и инициализации виджета-формы. Любые ошибки, возникающие во время этого процесса, перехватываются и регистрируются в консоли.

Важно отметить, что этот код представляет собой одну входную точку для запуска загрузчика виджета-формы. Фактические реализации классов и методов, которые вызываются, определены в импортированных модулях и не предоставлены в данном кодовом фрагменте.