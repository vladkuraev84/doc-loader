## Загрузчик Виджет-формы (Widget Form Loader) (src/index.ts)

_src/index.ts_
 
> Файл является частью веб-приложения и отвечает за загрузку и инициализацию виджета-формы. Является главным файлом для сбора классов.

### Импорт Модулей

Импортированные модули:

| Название                                           | Описание                                                                                                                       |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| **[StyleInjector](injectors/STYLEJECTORDOM.md)**   | Класс, отвечающий за подключение стилей в приложение.                                                                          |
| **[FormWorker](FORMWORKER.md)**                    | Класс, предназначенный для работы с HTML-формами.                                                                              |
| **[ParamsWorker](PARAMSWORKER.md)**                | Класс, обрабатывающий параметры форм.                                                                                          |
| **[Informator](informator/INFORMATOR.md)**         | Класс, предоставляющий информацию для приложения: адрес(URL) размещения бандла и файлы из **forms-jsons**(`scheme и locales`). |
| **[Bridge](bridge/BRIDGE.md)**                            | Класс, предназначен для сохранения данных в storage.                                                                           |
| **[BundleInjector](injectors/BUNDLEINJECTOR.md)**  | Класс, отвечающий за формирование, подключение и валидацию бандлов (пакетов).                                                  |
| **[ModuleLoader](modules/loader/MODULELOADER.md)** | Класс, загружающий модули согласно схемы(`scheme`).                                                                            |
| **[DomLoader](modules/loader/DOMLOADER.md)**       | Класс, загружающий файлы DOM(`js и style` в `div id='`[filesContainerId](CONFIG.md)`'`).                                       |
| **[SchemesController](SCHEMESCONTROLLER.md)**      | Класс, управляющий схемой.                                                                                                     |
| **[ContentLoader](content-loaders/README.md)**             | Класс, предназначенный для загрузки html-контента, файла.                                                                      |

Также импортируются различные типы данных из файлов **@/params-worker/types**, **@/informator/types**, **@/form-worker**, **./types/scheme.types**. Эти типы данных используются для аннотации переменных и параметров функций.

### Класс Загрузчика Виджет-Формы (WDFL)

Данный класс **WDFL** представляет собой загрузчик виджет-формы и содержит статический метод **`run()`**, который выполняет последовательность действий для загрузки и инициализации виджета-формы:

1. **Получение HTML-форм**: Метод **`FormWorker.getForms()`** получает все HTML-формы на странице и сохраняет их в переменной **`forms`** для дальнейшей обработке в цикле.
2. **Извлечение Параметров Форм**: Для каждой формы извлекаются параметры с использованием метода **`ParamsWorker.get(form)`**. Полученные параметры сохраняются в массив **`formsParams`** путем добавления с помощью метода массива **`push`**.
3. **Проверка Параметров**: Параметры проверяются на валидность с помощью метода **`ParamsWorker.validate(params)`**. Если параметры не проходят проверку, возникающие ошибки выводятся в консоль.
4. **Инициализация Информатора**: Создается экземпляр класса **`Informator`**, который инициализируется с массивом параметров **`formsParams`**.
5. **Загрузка Файлов с Информацией**: Метод **`informator.download()`** загружает необходимые файлы и информацию. Результат загрузки сохраняется в массив **`groupedFiles`**.
6. **Отправка Группированных Файлов**: Группированные файлы отправляются с помощью **`Bridge.send(groupedFiles)`** для дальнейшего сохранения в storage.
7. **Инициализация Контейнера для Файлов DOM**: Вызывается метод **`DomLoader.initFilesContainer()`** для инициализации контейнера, предназначенного для загрузки файлов **DOM** в `div id='config.filesContainerId'`.
8. **Инициализация Схем и Модулей**: Создаются экземпляры классов **`SchemesController`** и **`ModulesLoader`** для управления схемами и загрузкой модулей, соответственно. Схемы передаются в **`SchemesController`**.
9. **Внедрение Бандлов и Стилей**: Создаются экземпляры классов **`BundleInjector`** и **`StyleInjector`**, которые инициализируются с параметрами форм.

### Запуск Загрузчика Виджет-Формы

Последняя строка кода **`WDFL.run().catch(e => console.error(e))`** вызывает метод **`run()`** класса **`WDFL`**, что начинает процесс загрузки и инициализации виджета-формы. Любые ошибки, возникающие во время этого процесса, будут выведены в консоль с помощью **`console.error(e)`**.

Этот файл представляет собой центральную часть приложения для загрузки виджета-формы и включает в себя обработку форм, загрузку данных и модулей, а также подключение стилей и бандлов.

### Импорт типов

В начале кода есть импорты типов.

```ts
import type {FormParams} from '@/params-worker/types';
import type {FormInformations, Group} from '@/informator/types';
import type {HTMLForms} from '@/form-worker';
import type {Scheme} from '@/types/scheme.types';
```