## Класс `BundleInjector`

> Класс **BundleInjector** предназначен для инжекции бандла (пакета) в веб-страницу на основе определенных параметров и условий. В этом разделе будет разъяснено, как класс **BundleInjector** работает и какие методы и свойства он содержит.

### Конструктор

Конструктор класса **BundleInjector** выполняется при создании экземпляра класса. Он принимает массив параметров **params**, представляющих параметры формы. Описание действий, выполняемых в конструкторе:

- **Проверка наличия параметров**: Метод `ParamsWorker.hasAnyDevParam(params)` проверяет наличие параметров на режим `dev`. Если хотя бы один из таких параметров есть, инъекция бандла не выполняется.
- **Проверка наличия уже инъектированного скрипта**: Метод `BundleInjectorDom.isLoaded()` проверяет, был ли уже инъектирован скрипт на страницу. Если инъекция уже произошла, дополнительная инъекция не выполняется.
- **Получение пути инициализации контента**: Метод `ParamsWorker.getInitContentPath(params)` получает путь инициализации контента из параметров. Если такой путь не определен, то будет выполнена инъекция бандла по умолчанию.
- **Генерация и инъекция скрипта**: Если путь инициализации контента определен, то класс `Bundler` используется для получения локального URL бандла. Затем генерируется и инъектируется скрипт с этим URL.
- **Проверка наличия ошибки при загрузке скрипта**: Если происходит ошибка при загрузке скрипта, вызывается метод `handleError(error)`, который удаляет ошибочный скрипт и выполняет инъекцию бандла по умолчанию.
- **Вывод предупреждения в консоль**: Метод `showWarn(localPath)` выводит предупреждение в консоль, сообщая о том, что бандл не был найден в локальном пути и вместо этого используется бандл с сервера.

### Метод `generateScript(bundleUrl: string)`

Этот приватный метод создает и возвращает элемент **script** для инъекции. Он принимает `bundleUrl` - URL бандла, и устанавливает соответствующие атрибуты для этого элемента, такие как `type`, `id`, и `src`. Также он устанавливает обработчик ошибки для случаев, когда скрипт не может быть загружен.

### Метод `injectDefaultBundle()`

Этот приватный метод выполняет инъекцию бандла по умолчанию. В случае, если не удается найти бандл в локальном пути, будет использован бандл по умолчанию. Метод создает и инъектирует скрипт этого бандла, а также выводит предупреждение в консоль.

### Метод `handleError(error: ErrorEvent)`

Этот приватный метод вызывается при возникновении ошибки при загрузке скрипта. Он удаляет ошибочный скрипт и затем выполняет инъекцию бандла по умолчанию. Также, он выводит предупреждение в консоль, сообщая о проблеме с загрузкой бандла.

### Метод `showWarn(localPath: string)`

Этот приватный метод выводит предупреждение в консоль, сообщая о том, что бандл не был найден в локальном пути, и вместо этого используется бандл с сервера.

### Импорты

В начале кода видны импорты различных модулей и классов. Эти импорты описаны в других разделах и представляют собой зависимости этого класса.